<template>
  <div style="width:100%;height:100vh;">
    <tsGantt
      :data="data"
      :columns="columns" 
      @onTaskCreate="onTaskCreate"
      @onTaskChangeContent="onTaskChangeContent"
      @onTaskDelete="onTaskDelete"
      @onTaskIndent="onTaskIndent"
      @onTaskTimeChange="onTaskTimeChange"
      @onDragSort="onDragSort"
    ></tsGantt>
  </div>
</template>

<script>
import TsGantt from "@/components";

/** æ—¶é—´åˆ—è¡¨ **/

/**
 * onRowCreate // ä»»åŠ¡åˆ›å»º
 * onRowDelete // ä»»åŠ¡åˆ é™¤
 * onRowIndent  // ä»»åŠ¡ç¼©è¿›
 * onRowChangeName  // ä»»åŠ¡ä¿®æ”¹
 */

const dataList = [
  {
    executor: null,
    content: 'ç»˜åˆ¶è¡¨ç›˜è®¾è®¡é€»è¾‘',
    startDate: '2020-07-01 08:02:02',
    endDate: '2020-07-02 18:00:00',
    collapsed: false,
    children: [],
  },
  {
    executor: null,
    content: 'ç”˜ç‰¹å›¾å®žçŽ°',
    startDate: '2016-12-01',
    endDate: '2016-12-31', 
    collapsed: false,
    children: [
      {
        executor: null,
        content: 'ç»˜åˆ¶è¡¨ç›˜è®¾è®¡é€»è¾‘',
        startDate: '2020-07-01 08:02:02',
        endDate: '2020-07-02 18:00:00',
        collapsed: false,
        children: [],
      },
      {
        executor: null,
        content: 'ç»˜åˆ¶è¡¨ç›˜è®¾è®¡é€»è¾‘2',
        startDate: '2020-07-01 08:02:02',
        endDate: '2020-07-02',
        collapsed: false,
        children: [
          {
            executor: null,
            content: 'ç”˜ç‰¹å›¾å®žçŽ°2',
            startDate: null,
            endDate: null, 
            collapsed: false,
          },
          {
            executor: null,
            content: 'é˜…è¯»å–œæ¬¢çš„ä¹¦ðŸ“š',
            startDate: '2020-08-18',
            endDate: '2020-08-19', 
            collapsed: false,
          },
        ]
      },
    ],
  },
  {
    executor: null,
    content: 'ç”˜ç‰¹å›¾å®žçŽ°2',
    startDate: null,
    endDate: null, 
    collapsed: false,
    children: [],
  },
  {
    executor: null,
    content: 'é˜…è¯»å–œæ¬¢çš„ä¹¦ðŸ“š',
    startDate: '2020-08-18',
    endDate: '2020-08-19', 
    collapsed: false,
    children: [],
  },
  {
    executor: null,
    content: 'ä¸‰ä½“',
    startDate: '2020-10-18',
    endDate: '2020-10-19', 
    collapsed: false,
    children: [],
  },
  {
    executor: null,
    content: 'é¢„è®¢çºªå¿µæ—¥é¤åŽ…',
    startDate: '2020-07-01',
    endDate: '2020-09-06', 
    collapsed: false,
    children: [],
  },
  {
    executor: null,
    content: 'ç»˜åˆ¶è¡¨ç›˜è®¾è®¡é€»è¾‘"',
    startDate: '2020-08-20',
    endDate: '2020-09-06', 
    collapsed: false,
    children: [],
  },
];

const columns = [
  {
    width: 260,
    minWidth: 210,
    name: 'content',
    visible: true,
    keepVisible: true,
    sortable: true,
  },
  {
    width: 100,
    minWidth: 52,
    name: 'executor',
    visible: true,
    keepVisible: false,
    sortable: true,
  },
  {
    width: 120,
    minWidth: 70,
    name: 'endDate',
    visible: true,
    keepVisible: false,
    sortable: true,
  },
  {
    width: 100,
    minWidth: 70,
    name: 'fs',
    visible: true,
    keepVisible: false,
    sortable: false,
  },
];
export default {
  name: "app",
  data() {
    return {
      data: dataList,
      columns,
    };
  },
  methods: {
    /**
     * åˆ›å»ºä»»åŠ¡ 
     * parent: çˆ¶ä»»åŠ¡
     * task: å½“å‰ä»»åŠ¡
     */
    onTaskCreate(parent, task) {
      console.log(parent, task, 'onTaskCreate>>>>>>>>>>>>');
    },
    /**
     * ä»»åŠ¡ä¿®æ”¹
     * task: ä»»åŠ¡æ•°æ®
     * content: ä¿®æ”¹çš„å†…å®¹
     * oldContent: 
     */
    onTaskChangeContent(task, content, oldContent) {
      console.log(parent, content, oldContent, 'onTaskChangeContent>>>>>>>>>');
    },
    /**
     * åˆ é™¤ä»»åŠ¡
     * task åˆ é™¤å½“å‰ä»»åŠ¡
     */
    onTaskDelete(task) {
      console.log(task, 'onTaskDelete >>>>>>>>>>>>>>>>>');
    },
    /**
     * ä»»åŠ¡å·¦å³ç§»åŠ¨
     * parent çˆ¶çº§ä»»åŠ¡
     * task å½“å‰ä»»åŠ¡
     */
    onTaskIndent(parent, task) {
      console.log(parent, task, 'onTaskIndent>>>>>>>>>>>>');
    },
    /**
     * æ—¶é—´å‘ç”Ÿå˜æ›´
     */
    onTaskTimeChange(task, startDate, endDate) {
      console.log(task, startDate, endDate, 'onTaskTimeChange>>>>>>>>>');
    },
    /**
     * ä»»åŠ¡å±‚çº§ä¸Šä¸‹æ‹–æ‹½é€»è¾‘
     */
    onDragSort(preParent, parentTask, preIndex, index, handleTask) {
      console.log(preParent, parentTask, preIndex, index, handleTask, 'onDragSort>>>>>>');
    }
  },
  components: {
    TsGantt,
  }
};
</script>

<style lang="scss">
#app {
  font-family: "Avenir", Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;
  color: #2c3e50;
  padding: 20px 25px 0;
}

html, body {
}
</style>
